[id="additional-steps-disconnected-clusters_{context}"]
= Additional steps for disconnected clusters

In a disconnected cluster, Keycloak communicates with OpenShift Oauth Server through proxy. Follow the additional steps to get Keycloak integrated with OpenShift Oauth Login.

.Procedure

. Login to the Keycloak Pod.
+
[source,yaml]
----
  oc exec -it dc/keycloak -n argocd -- /bin/bash
----
. Run JBoss CLI command.
+
[source,yaml]
----
  /opt/eap/bin/jboss-cli.sh
----
. Start an Embedded Standalone Server.
+
[source,yaml]
----
  embed-server --server-config=standalone-openshift.xml
----
. Setup proxy mappings for OpenShift OAuth Server host.
+
[source,yaml]
----
  /subsystem=keycloak-server/spi=connectionsHttpClient/provider=default:write-attribute(name=properties.proxy-mappings,value=["<oauth-server-hostname>;http://<proxy-server-host>:<proxy-server-port>"])
----
. Stop the Embedded Server.
+
[source,yaml]
----
  quit
----
. Reload JBoss.
+
[source,yaml]
----
  /opt/eap/bin/jboss-cli.sh --connect --command=:reload
----
