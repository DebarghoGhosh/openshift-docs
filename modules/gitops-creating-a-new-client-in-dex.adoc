// Module is included in the following assemblies:
//
// * configuring-sso-for-argo-cd-on-openshift

[id="creating-a-new-client-in-dex_{context}"]
= Creating a new client in Dex

= Enabling Dex openshift OAuth Connector

Dex uses the users and groups defined within OpenShift by querying the platform provided `OAuth` server.

. The `openShiftOAuth` property is used to trigger the Operator to auto configure the built-in OpenShift `OAuth` server.
. The `groups` property is used to mandate the users to be part of one or all the groups in the groups list.
. The `RBAC Policy` property is used to give the admin role in the Argo CD cluster to users in the OpenShift cluster-admins group.
+
[source,yaml]
----
apiVersion: argoproj.io/v1alpha1
kind: ArgoCD
metadata:
  name: example-argocd
  labels:
    example: openshift-oauth
spec:
  dex:
    openShiftOAuth: true
    groups:
     - default
  rbac:
    defaultPolicy: 'role:readonly'
    policy: |
      g, cluster-admins, role:admin
    scopes: '[groups]'
----
